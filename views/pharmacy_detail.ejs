<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title><%= pharmacy.name %> — Details</title>

  <style>
    :root{
      --brand:#0b5aa6;
      --accent:#e6eef8;
      --muted:#6b6f76;
      --card-bg:#ffffff;
      --max-width:1100px;
      --radius:12px;
      --gap:18px;
      font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      color:var(--muted);
    }
    html,body{height:100%;margin:0;background:#f4f6f8}
    .wrap{max-width:var(--max-width);margin:36px auto;padding:20px}

    .header{display:flex;align-items:center;gap:16px;background:linear-gradient(90deg,var(--accent),#fff);padding:18px;border-radius:14px;box-shadow:0 6px 18px rgba(11,90,166,0.08);border-left:6px solid var(--brand);}
    .crest{width:64px;height:64px;border-radius:8px;display:flex;align-items:center;justify-content:center;background:var(--brand);color:#fff;font-weight:700}
    .title-block{display:flex;flex-direction:column}
    h1{margin:0;font-size:20px;color:var(--brand)}
    .sub{font-size:13px;color:var(--muted);margin-top:4px}

    .lang-switcher{margin-left:auto}
    select{padding:4px 6px;border-radius:6px;border:1px solid #ccc;font-size:13px}

    .card{display:grid;grid-template-columns:320px 1fr;gap:var(--gap);background:var(--card-bg);padding:20px;border-radius:12px;margin-top:18px;box-shadow:0 6px 20px rgba(20,24,28,0.05)}
    .photo{border-radius:10px;overflow:hidden;display:flex;flex-direction:column;gap:12px}
    .photo img{width:100%;height:260px;object-fit:cover;display:block}
    .photo .meta{display:flex;gap:10px;align-items:center;justify-content:space-between}
    .badge{background:var(--accent);padding:8px 10px;border-radius:8px;font-size:13px;color:var(--brand);font-weight:600}

    .details h2{margin:0;color:var(--brand);font-size:18px}
    .address{margin:8px 0;color:#444}
    .contact{display:flex;gap:12px;flex-wrap:wrap;margin-top:12px}
    .pill{background:#f1f4f8;padding:8px 12px;border-radius:999px;font-size:13px}

    .actions{margin-top:18px;display:flex;gap:12px}
    .btn{display:inline-block;padding:10px 16px;border-radius:8px;text-decoration:none;font-weight:600;border:1px solid transparent}
    .btn-primary{background:var(--brand);color:white}
    .btn-outline{background:transparent;color:var(--brand);border-color:var(--brand)}

    .grid{display:grid;grid-template-columns:repeat(2, minmax(0,1fr));gap:12px;margin-top:16px}
    .info-card{background:#fafbfd;padding:12px;border-radius:10px}
    .info-card b{display:block;color:#23384a}

    .gov-note{margin-top:18px;font-size:13px;color:#5b6268}

    .map-container{margin-top:20px;border-radius:12px;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,0.08)}
    .map-container iframe{width:100%;height:320px;border:0}

    @media (max-width:900px){
      .card{grid-template-columns:1fr;}
      .photo img{height:220px}
      .grid{grid-template-columns:repeat(1,1fr)}
    }
    @media (max-width:420px){
      .header{padding:12px}
      .crest{width:52px;height:52px}
      h1{font-size:18px}
      .photo img{height:180px}
      .btn{padding:9px 12px;font-size:14px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header class="header" role="banner">
      <div class="crest" aria-hidden="true">GOV</div>
      <div class="title-block">
        <h1 id="pharmacy-name"><%= pharmacy.name %></h1>
        <div class="sub" id="community-label">Community Pharmacy — registered shop number: <%= pharmacy.registrationNumber || 'N/A' %></div>
      </div>
      <!-- Language Switcher -->
      <div class="lang-switcher">
        <select id="lang">
          <option value="en">English</option>
          <option value="hi">हिन्दी</option>
          <option value="pa">ਪੰਜਾਬੀ</option>
        </select>
      </div>
    </header>

    <main>
      <section class="card">
        <aside class="photo">
          <img src="<%= pharmacy.image || 'https://media.gettyimages.com/id/88930836/photo/apollo-pharmacy-in-hyderabad-india.jpg?s=612x612&w=gi&k=20&c=-zaKr7OHd6S5PrFT9lq4PXFdb5LZan0HJh6ECljLEiA=' %>" alt="Front view of <%= pharmacy.name %>"/>
          <div class="meta">
            <div class="badge" id="hours-label">Open: <strong><%= pharmacy.opens || '09:00' %> — <%= pharmacy.closes || '21:00' %></strong></div>
            <div style="font-size:13px;color:#2b3b45" id="rating-label">Rating: <strong><%= pharmacy.rating ? pharmacy.rating.toFixed(1) : '—' %></strong></div>
          </div>
          <div style="font-size:13px;color:#5b6268" id="manager-label">In-charge: <strong><%= pharmacy.manager || 'Not listed' %></strong></div>
        </aside>

        <div class="details">
          <h2 id="details-title">Shop details & contact</h2>
          <p class="address"><%= pharmacy.address %></p>

          <div class="contact">
            <div class="pill" id="phone-label">Phone: <a href="tel:<%= pharmacy.phone %>"><%= pharmacy.phone || 'N/A' %></a></div>
            <div class="pill" id="email-label">Email: <a href="mailto:<%= pharmacy.email %>"><%= pharmacy.email || 'info@example.com' %></a></div>
            <div class="pill" id="license-label">License: <%= pharmacy.license || 'Not available' %></div>
          </div>

          <div class="actions">
            <a class="btn btn-primary" id="view-meds-btn" href="/pharmacy/<%= pharmacy._id %>/medicines">View Medicines</a>
            <a class="btn btn-outline" id="report-btn" href="/contact?pharmacy=<%= pharmacy._id %>">Report an issue</a>
          </div>

          <div class="grid">
            <div class="info-card">
              <b id="services-label">Services</b>
              <div><%= (pharmacy.services && pharmacy.services.join(', ')) || 'Dispensing, Consultation' %></div>
            </div>
            <div class="info-card">
              <b id="access-label">Accessibility</b>
              <div><%= pharmacy.accessible ? 'Wheelchair accessible' : 'Please call to check accessibility' %></div>
            </div>
          </div>

          <div class="map-container">
            <iframe src="https://www.google.com/maps?q=<%= encodeURIComponent(pharmacy.address) %>&output=embed"></iframe>
          </div>

          <p class="gov-note" id="note-label">This page is provided for informational purposes. For verified records, consult the official health department registry.</p>
        </div>
      </section>
    </main>
  </div>

  <!-- Language script -->
  <script>
    const translations = {
      en: {
        community: "Community Pharmacy — registered shop number:",
        hours: "Open:",
        rating: "Rating:",
        manager: "In-charge:",
        details: "Shop details & contact",
        phone: "Phone:",
        email: "Email:",
        license: "License:",
        viewMeds: "View Medicines",
        report: "Report an issue",
        services: "Services",
        access: "Accessibility",
        note: "This page is provided for informational purposes. For verified records, consult the official health department registry."
      },
      hi: {
        community: "सामुदायिक फार्मेसी — पंजीकृत दुकान संख्या:",
        hours: "खुला:",
        rating: "रेटिंग:",
        manager: "प्रभारी:",
        details: "दुकान विवरण और संपर्क",
        phone: "फोन:",
        email: "ईमेल:",
        license: "लाइसेंस:",
        viewMeds: "दवाइयाँ देखें",
        report: "समस्या रिपोर्ट करें",
        services: "सेवाएँ",
        access: "सुलभता",
        note: "यह पृष्ठ केवल सूचना के लिए है। सत्यापित रिकॉर्ड के लिए, कृपया आधिकारिक स्वास्थ्य विभाग रजिस्ट्री देखें।"
      },
      pa: {
        community: "ਕਮਿਊਨਿਟੀ ਫਾਰਮੇਸੀ — ਰਜਿਸਟਰ ਦੁਕਾਨ ਨੰਬਰ:",
        hours: "ਖੁੱਲ੍ਹਾ:",
        rating: "ਰੇਟਿੰਗ:",
        manager: "ਇੰਚਾਰਜ:",
        details: "ਦੁਕਾਨ ਵੇਰਵੇ ਅਤੇ ਸੰਪਰਕ",
        phone: "ਫੋਨ:",
        email: "ਈਮੇਲ:",
        license: "ਲਾਇਸੈਂਸ:",
        viewMeds: "ਦਵਾਈਆਂ ਵੇਖੋ",
        report: "ਸਮੱਸਿਆ ਦੀ ਰਿਪੋਰਟ ਕਰੋ",
        services: "ਸੇਵਾਵਾਂ",
        access: "ਪਹੁੰਚ",
        note: "ਇਹ ਪੇਜ ਸਿਰਫ ਜਾਣਕਾਰੀ ਲਈ ਹੈ। ਪ੍ਰਮਾਣਿਤ ਰਿਕਾਰਡ ਲਈ, ਕਿਰਪਾ ਕਰਕੇ ਅਧਿਕਾਰਕ ਸਿਹਤ ਵਿਭਾਗ ਰਜਿਸਟਰੀ ਵੇਖੋ।"
      }
    };

    const elements = {
      community: document.getElementById("community-label"),
      hours: document.getElementById("hours-label"),
      rating: document.getElementById("rating-label"),
      manager: document.getElementById("manager-label"),
      details: document.getElementById("details-title"),
      phone: document.getElementById("phone-label"),
      email: document.getElementById("email-label"),
      license: document.getElementById("license-label"),
      viewMeds: document.getElementById("view-meds-btn"),
      report: document.getElementById("report-btn"),
      services: document.getElementById("services-label"),
      access: document.getElementById("access-label"),
      note: document.getElementById("note-label")
    };

    document.getElementById("lang").addEventListener("change", e => {
      const lang = e.target.value;
      for (let key in elements) {
        if (elements[key]) {
          if (key === "viewMeds" || key === "report") {
            elements[key].textContent = translations[lang][key];
          } else {
            const text = elements[key].innerHTML;
            const parts = text.split(":");
            elements[key].innerHTML = translations[lang][key] + (parts.length > 1 ? ":" + parts.slice(1).join(":") : "");
          }
        }
      }
    });
  </script>
</body>
</html>
